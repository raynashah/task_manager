<!DOCTYPE html>
<html>
<head>
	<title>GYST! | New Task</title>
	<script type="text/javascript" src="/js/api-categories.js"></script>
</head>
<body>
	<header>
		<span>
			GYST
		</span>
		<nav>
			<a href="/tasks">Tasks</a>
			<a href="/categories">Categories</a>
		</nav>
	</header>
	<main>
		<h1>New Task</h1>
		<form action="/api/tasks" method="post">
			<div class='input-container'>
				<label for= 'title'>Title</label>
				<input type="text" name="title" id='title' placeholder='Enter title...'>
			</div>
			<div class='input-container'>
				<label for='priority'>Priority Level</label>
				<div class='radio-container'>
					<label for="none">none</label>
					<input type="radio" name="priority" id="none" value="none" checked>
					<label for="one">!</label>
					<input type="radio" name="priority" id="one" value="!">
					<label for="two">!!</label>
					<input type="radio" name="priority" id="two" value="!!">
					<label for="three">!!!</label>
					<input type="radio" name="priority" id="three" value="!!!">
				</div>
				<div class='input-container'>
					<label for='categoryId'>Category</label>
					<select id='category' name='categoryId'></select>
				</div>
				<div class='input-container'>
					<label for='dueAt'>Due</label>
					<input type="datetime-local" name="dueAt">
				</div>
				<div class='input-container'>
					<label for='reminderAt'>Remind Me</label>
					<input type="datetime-local" name="reminderAt">
				</div>
				<div class='input-container'>
					<textarea rows="4" cols="50" name='notes' placeholder='Notes to self...'></textarea>
				</div>
			</div>
			<button class='submit'>Create Task</button> 
		</form>
	</main>
</body>
<script type="text/javascript">
	async function render(){
		const categories = await getCategories();
		createHTMLCategories(categories); 
	}

	function createHTMLCategories(categories){
		const categorySelect = document.querySelector("#category")
		for(let i = 0; i < categories.length; i++){
			const category = categories[i];
			const option = document.createElement("option");
			option.value = category.id;
			const text = document.createTextNode(category.title);
			option.appendChild(text);
			categorySelect.appendChild(option); 
		}
	}

	render();
</script>
</html>
